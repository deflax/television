{% extends 'base.html' %}

{% block metadata %}
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="UTF-8">
    <meta property="og:title" content="{{ server_name }}">
    <meta property="og:site_name" content="▷">
    <meta property="og:url" content="https://{{ server_name }}">
    <meta property="og:description" content="The landing page of the flaxnet">
    <meta property="og:type" content=product>
    <meta property="og:image" content="https://{{ server_name }}/static/images/logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
{% endblock %}

{% block title %}▷ Stream{% endblock %}

{% block content %}
<!-- Live Stream - Public Access -->
<div class="content-container bg-dark text-white">
  <div id="stream" class="container-fluid p-3 bg-dark text-white">
    <div class="row">
      <div class="col-md-1 d-none d-md-block">
      </div>
      <div class="col-12 col-lg-10">
          <div class="content">
              <video controls crossorigin playsinline poster="static/images/poster.png">
              </video>
              <img id="audio-only-poster" src="/static/images/odeala.jpg" alt="Audio Only" style="display:none; width:100%; border-radius:4px;">
              <div class="d-flex justify-content-between align-items-center mt-1 mb-2">
                <p class="mb-0 text-secondary" id="epg-now-playing" style="display:none;">
                  <i class="fa fa-play-circle" aria-hidden="true"></i> Now: <span id="epg-now-name"></span>
                </p>
                <p class="mb-0 text-secondary"><span id="visitor-number">-</span> <i class="fa fa-eye" aria-hidden="true"></i></p>
              </div>
              <div class="d-flex justify-content-between align-items-start">
                <div id="epg-schedule" class="flex-grow-1">
                  <p class="text-secondary"><i class="fa fa-calendar" aria-hidden="true"></i> Loading schedule...</p>
                </div>
                <div class="d-flex gap-2 ms-3">
                  <button id="audio-only-btn" class="btn btn-sm btn-outline-secondary" title="Toggle video">
                    <i class="fa fa-headphones"></i> audio only
                  </button>
                  <a href="/live/stream.m3u8" class="btn btn-sm btn-outline-secondary" target="_blank">live.hls</a>
                  <!-- <a href="/live/stream.mp3" class="btn btn-sm btn-outline-secondary" target="_blank">live.mp3</a> -->
              </div>
	        </div>
      </div>
      <div class="col-md-1 d-none d-md-block">
      </div>
    </div>
  </div>
</div>

<script src="/static/js/epg.js"></script>
<script src="/static/js/player.js"></script>
<script src="/static/js/sse.js"></script>
{% endblock %}
